<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="favicon.bmp">
	<link rel="stylesheet" type="text/css" href="style.css">
	<title>Tárgyválasztás</title>
	<style>*{line-height: 130%;}</style>
</head>


<div class="header">
	<div><a href="done\II\expqs.html">expqs</a></div>
<hr>
	<div><a href="done\ANAT\anat.html"><strong>Anatómia</strong></a></div>
	<div><a href="done\ANAT\Histology\histo.html"><strong>Szövettan</strong></a></div>
	<div><a href="done\ANAT\Fejlodestan\embrio.html"><strong>Fejlődéstan</strong></a></div>
<hr>
	<div><a href="done\BioKemia\III\biokemia.html">Biokémia</a> <font style="font-size:80%"><a href="done\BioKemia\I\biokemia_I.html">(I)</a> <a href="done\BioKemia\II\biokemia_II.html">(II)</a> <a href="done\BioKemia\III\biokemia_III.html">(III)</a></font></div>
	<div><a href="done\SejtBiosz\sejtbiosz2.html">Molekuláris Sejtbiológia</a> <font style="font-size:80%"><a href="done\SejtBiosz\sejtbiosz1.html">(I)</a></font></div>
	<div><a href="done\Elettan\elettan2.html">Élettan II</a> <font style="font-size:80%"><a href="done\Elettan\elettan1.html">(I)</a> <a href="done\Elettan\elettan1_old.html">(+régi)</a></font></div>
<hr>
	<div><a href="done\Orvosi_Biologia\ob.html">Orvosi Biológia</a></div>
	<div><a href="done\Orvosi_Kemia\kemia.html">Orvosi Kémia</a></div>
	<div><a href="done\BioFizika\bifiz.html">Biofizika I-II</a></div>
	<div><a href="done\FejlodesBiologia_I\FejlBiosz.html">Fejlődésbiológia I</a></div>
	<div><a href="done\ModMem\ModMem.html">Modellmembránok</a></div>
</div>

<div class="header">
	<center>tételek</center>
	<table>
		<tr><th id="elet11">21</th>
			<td><input type="number" id="elet12" style="width:45px"></td>
			<td id="elet13"></td>
			<th id="elet14"></th>
		</tr>
		<tr><th id="elet21">19</th>
			<td><input type="number" id="elet22" style="width:45px"></td>
			<td id="elet23"></td>
			<th id="elet24"></th>
		</tr>
		<tr><th id="elet31">23</th>
			<td><input type="number" id="elet32" style="width:45px"></td>
			<td id="elet33"></td>
			<th id="elet34"></th>
		</tr>
		<tr><th id="elet41">20</th>
			<td><input type="number" id="elet42" style="width:45px"></td>
			<td id="elet43"></td>
			<th id="elet44"></th>
		</tr>
	</table>
	<center><font id="percentX">asd</font>%</center>
</div>
<script>
	var howmany = 4 +1
	for (i = 1; i < howmany; i++) { document.getElementById("elet"+i+"2").value = localStorage.getItem("elettPerc"+i) }
	function calcValPerc(){
		document.getElementById("percentX").innerHTML = 1/100/100/100
		for (i = 1; i < howmany; i++) { 
			var max = document.getElementById("elet"+i+"1").innerHTML
			max = Number(max)
			var now = document.getElementById("elet"+i+"2").value
			now = Number(now)
			var perc = 100*now/max
			document.getElementById("elet"+i+"3").innerHTML = Math.round(perc) + "%"
			
			perc = 100*now* Number(document.getElementById("percentX").innerHTML) /max
			document.getElementById("percentX").innerHTML = perc
		}
		var num = Number(document.getElementById("percentX").innerHTML)
		document.getElementById("percentX").innerHTML = num.toFixed(2)
		
		for (i = 1; i < howmany; i++) { 
			document.getElementById("elet"+i+"4").innerHTML = 1/100/100/100
			for (x = 1; x < howmany; x++) { 
				var max = document.getElementById("elet"+x+"1").innerHTML
				max = Number(max)
				var now = document.getElementById("elet"+x+"2").value
				now = Number(now)
				if ( x == i ) { now = now+1 }
				
				perc = 100*now* Number(document.getElementById("elet"+i+"4").innerHTML) /max
				document.getElementById("elet"+i+"4").innerHTML = perc
			}
			var num = Number(document.getElementById("elet"+i+"4").innerHTML)
			num = num.toFixed(2)
			num = num - Number(document.getElementById("percentX").innerHTML)
			document.getElementById("elet"+i+"4").innerHTML = "+"+num.toFixed(2)+"%"
		}
	}
	calcValPerc()
	for (i = 1; i < howmany; i++) { 
		document.getElementById("elet"+i+"2").oninput = function(){ 
			calcValPerc()
			
			var id = this.id
			id = id.slice(-2)
			id = id.slice(0,1)
			localStorage.setItem("elettPerc"+id,this.value)
		} 
	}
	
	
	document.getElementById("elet12").value = localStorage.getItem("msb.I.")
	document.getElementById("elet22").value = localStorage.getItem("msb.II.")
	document.getElementById("elet32").value = localStorage.getItem("msb.III.")
	document.getElementById("elet42").value = localStorage.getItem("msb.IV.")
	calcValPerc()
</script>


<script>
	function F_clearLS() {
		var input = document.createElement("input")
		input.type = "button"
		input.value = "clear LS"
		document.body.appendChild(input)
		input.onclick = function(){ 
			var bgColor = input.style.backgroundColor
			input.style.backgroundColor = "aqua"
			setTimeout(localStorage.clear(), 500)
			setTimeout(function () { input.style.backgroundColor = bgColor  }, 500);
			
			localStorage.setItem("lsCount",0)
		}

		input.style.position = "absolute"
		input.style.right = "5px"
		input.style.bottom = "50px"
	}
	F_clearLS()
	function F_InputLoad() {
		var input = document.createElement("input")
		input.type = "button"
		input.value = "load LS"
		document.body.appendChild(input)
		input.onclick = function(){ 
			var bgColor = input.style.backgroundColor
			input.style.backgroundColor = "aqua"
			setTimeout(document.getElementById('fileinput').click(), 500)
			setTimeout(function () { input.style.backgroundColor = bgColor }, 500);
		}

		input.style.position = "absolute"
		input.style.right = "5px"
		input.style.top = "10px"
	}
	F_InputLoad()
	function F_InputSave() {
		var input = document.createElement("input")
		input.type = "button"
		input.id = "btn_saveLS"
		input.value = "Save LS"
		document.body.appendChild(input)
		//input.onmousedown = function(){ this.style.backgroundColor  = "green" }
		input.onclick = function(){ 
			this.style.backgroundColor  = "green"
			setTimeout(function () {func_saveLS() }, 500) 
		}

		input.style.position = "absolute"
		input.style.right = "5px"
		input.style.top = "50px"
	}
	F_InputSave()
	function F_fileinput() {
		var input = document.createElement("input")
		input.type = "file"
		input.id = "fileinput"
		document.body.appendChild(input)
		input.style.display = "none"
	}
	F_fileinput()
	
	// SAVE LS
	function download(filename, text) { // (netről copyztam) --> (azért kellett, mert androidon máshogy nemtudom lementeni)
		/*var element = document.createElement('a');
		element.setAttribute('href', 'data:text/plain;charset=utf-8,' + "teszteljük");
		element.setAttribute('download', filename);
		element.appendChild(document.createTextNode("Save file"));
	  
		element.style.display = 'none';
		document.body.appendChild(element);
		element.click();
		document.body.removeChild(element);
		*/

		var pom = document.createElement('a');
		pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
		pom.setAttribute('download', filename);

		if (document.createEvent) {
			var event = document.createEvent('MouseEvents');
			event.initEvent('click', true, true);
			pom.dispatchEvent(event);
		} else {
			pom.click();
		}
	}
	function func_saveLS() {
		var text = ""
		
		var lsLength = localStorage.length
		lsLength = lsLength*2/3
		lsLength = Math.floor(lsLength)
		var i = 0
		for ( i=0; i<lsLength; i++ ) { text = text + localStorage.key(i) + " = " + localStorage.getItem(localStorage.key(i)) + " NEXTONE " }
		for ( i=lsLength; i<localStorage.length; i++ ) { text = text + localStorage.key(i) + " = " + localStorage.getItem(localStorage.key(i)) + " NEXTONE " }
		
		var count = localStorage.getItem("lsCount")
		count = Number(count) +1
		localStorage.setItem("lsCount",count)
		var filename = 'localStorage'+count+'.txt'
		
		download(filename, text);
		document.getElementById("btn_saveLS").style.backgroundColor = ""
	}
	JSON.stringify(localStorage)
	// LOAD LS
	function func_loadLS(content) {
		do {
			var phaseText = content.slice(0,content.indexOf(" NEXTONE "));
			content = content.slice(content.indexOf(" NEXTONE ") +9)
			var variable = phaseText.slice(0,phaseText.indexOf(" = "));
			var price = phaseText.slice(phaseText.indexOf(" = ") +3);
			localStorage.setItem(variable, price)
		}
		while (phaseText.length > 1);
	}
	var fileInput = document.getElementById('fileinput');
	fileInput.addEventListener('change', function(e){
		var file = fileInput.files[0];
		var textType = /text.*/;
		var content

		if (file.type.match(textType)) {
			var reader = new FileReader();

			reader.onload = function(e) {
				content = reader.result
				func_loadLS(content)
			}

			reader.readAsText(file);    
		} else {
			alert("File not supported!")
		}
	});
	
	// set SkipTime
	function F_skipTime() {
		var input = document.createElement("input")
		//input.id = "skipHour"
		input.type = "number"
		input.style.width = "50px"
		document.body.appendChild(input)
		input.style.position = "absolute"
		input.style.right = "5px"
		input.style.bottom = "50%"
		var date = new Date();
		var remain = Math.floor(date.getTime()/3600000)
		remain = localStorage.getItem("vizsgaSkip") - remain
		if ( remain < 0 ) { remain = 0 }
		input.value = remain
		
		input.oninput = function(){ 
			var date = new Date();
			var time = Math.floor(date.getTime()/3600000)
			time = time + Number(this.value)
			localStorage.setItem("vizsgaSkip",time)
		}
		/*
		var input = document.createElement("input")
		input.type = "button"
		input.value = "skip"
		document.body.appendChild(input)
		input.onclick = function(){ 
			var date = new Date();
			var time = Math.floor(date.getTime()/3600000)
			time = time + Number(skipHour.value)
			localStorage.setItem("vizsgaSkip",time)
		}
		input.style.position = "absolute"
		input.style.right = "55px"
		input.style.bottom = "50%"
		*/
	}
	F_skipTime()
</script>

<!--
<script>setTimeout(function(){window.location.href='../../targyvalasztas.html'},5000);</script>
-->



































